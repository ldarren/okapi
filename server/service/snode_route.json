{
	"routes":{
		"PUT/snode/key": [
			["web.bodyParser", "_.req", "_.:body"],
            [["util.input", "@.spec.room_msg"], "_.body", "_.input"],
            ["db.get", "$.db.user", "_.user.i", "_.user"],
			["util.extend", "_.input", "_.params", "_.room"],
            ["crdt.verify", "_.room.id", "_.user.i"],
			["crdt.sendAll", "$.db.queue", "_.room", "_.user", "_.output"]
		],
		"GET/snode/key": [
			["web.queryParser", "_.req", "_.qs"],
			[["util.input", "@.spec.query_ref"], "_.qs", "_.input"],
			["@.snode.findOneById", "_.params.id", "_.:query"],
            ["db.find", "$.db.snode", "_.:query", "_.:records"],
			["util.pop", "_.:records", "_.record"],
			["@.snode.hasRef", "_.req.method", "_.params", "_.qs", "_.record", "_.output"]
		],
        "/1.0/snode/key/:id": [
            [["web.output"], "_.res", "_.output", "_.params"],
			["auth.verify", "_.req", "_.user"],
			[["util.input", "@.spec.params_id"], "$.params", "_.params"],
            [["util.router", "id", "snode", "/key"], "_.req.method", "_.params"]
		]
	}
}
