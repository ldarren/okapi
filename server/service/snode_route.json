{
	"routes":{
		"PUT/snode/key": [
			["web.bodyParser", "_.req", "_.:body"],
            [["util.input", "@.spec.snode"], "_.:body", "_.:input"],
            ["db.get", "$.db.user", "_.user.i", "_.user"],
			["@.snode.findOneById", "_.params.id", "_.record"],
			["db.set", "$.db.snode", "_.record.i", "_.:body", {}, "_.user", "_.output"]
		],
		"PATCH/snode/key": [
			["web.bodyParser", "_.req", "_.:body"],
            ["db.get", "$.db.user", "_.user.i", "_.user"],
["util.log", "$$$1", "_.params"],
			["@.snode.findOneById", "_.params.id", "_.record"],
["util.log", "$$$2", "_.record"],
			["@.copse.fRecord2CRDT", "_.record", "_.data"],
            ["crdt.join", "$.crdt", "_.params", "_.user", "_.data", "_.output"],
			["@.snode.bodyParser", "_.:body", "_.:uint8"],
            ["crdt.update", "_.params.id", "_.:uint8", "_.base64"],
			["crdt.sendAll", "$.db.queue", "_.params.id", "part", "_.user", "_.output", "_.base64.payload"],
			["crdt.payload", "_.params.id", "_.:updated"],
			["db.set", "$.db.snode", "_.record.i", "_.:updated", {}, "_.user", "_.output"]
		],
		"GET/snode/key": [
			["web.queryParser", "_.req", "_.qs"],
			[["util.input", "@.spec.query_ref"], "_.qs", "_.input"],
			["@.snode.findOneById", "_.params.id", "_.record"],
			["@.snode.hasRef", "_.req.method", "_.params.id", "_.input", "_.record", "_.output"]
		],
        "/1.0/snode/key/:id": [
            [["web.output"], "_.res", "_.output", "_.params"],
			["auth.verify", "_.req", "_.user"],
			[["util.input", "@.spec.params_id"], "$.params", "_.params"],
            [["util.router", "id", "snode", "/key"], "_.req.method", "_.params"]
		]
	}
}
